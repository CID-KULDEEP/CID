<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transportation & Guide - Jharkhand Explorer</title>
    <link rel="stylesheet" href="/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* CSS Variables for consistency */
        :root {
            --color-primary: #4CAF50; /* Green */
            --color-secondary: #FFC107; /* Amber */
            --color-accent: #2196F3; /* Blue */
            --color-text: #333;
            --color-text-secondary: #666;
            --color-background: #f8f8f8;
            --color-surface: #ffffff;
            --color-card-border: #e0e0e0;
            --color-shadow: rgba(0, 0, 0, 0.1);

            --font-size-sm: 0.875rem;
            --font-size-base: 1rem;
            --font-size-lg: 1.125rem;
            --font-size-xl: 1.25rem;
            --font-size-2xl: 1.5rem;
            --font-size-3xl: 1.875rem;
            --font-size-4xl: 2.25rem;

            --space-4: 0.25rem;
            --space-8: 0.5rem;
            --space-12: 0.75rem;
            --space-16: 1rem;
            --space-20: 1.25rem;
            --space-24: 1.5rem;
            --space-32: 2rem;
            --space-40: 2.5rem;
            --space-48: 3rem;

            --radius-sm: 0.25rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;

            --shadow-sm: 0 1px 2px var(--color-shadow);
            --shadow-md: 0 4px 6px var(--color-shadow);
            --shadow-lg: 0 10px 15px var(--color-shadow);

            --duration-normal: 0.3s;
            --ease-standard: cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Dark theme variables */
        html[data-theme="dark"] {
            --color-primary: #66BB6A; /* Lighter Green */
            --color-secondary: #FFD54F; /* Lighter Amber */
            --color-accent: #64B5F6; /* Lighter Blue */
            --color-text: #e0e0e0;
            --color-text-secondary: #a0a0a0;
            --color-background: #1a1a1a;
            --color-surface: #2a2a2a;
            --color-card-border: #444;
            --color-shadow: rgba(0, 0, 0, 0.3);
        }

        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--color-background);
            color: var(--color-text);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 var(--space-20);
        }

        /* Navbar styles (assuming they are in style.css, but adding basic structure here for context) */
        .navbar {
            background-color: var(--color-surface);
            box-shadow: var(--shadow-sm);
            position: fixed;
            width: 100%;
            top: 0;
            left: 0;
            z-index: 1000;
            padding: var(--space-16) 0;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 var(--space-20);
        }

        .nav-logo .logo-text {
            font-size: var(--font-size-xl);
            font-weight: 700;
            color: var(--color-primary);
        }

        .nav-links {
            display: flex;
            gap: var(--space-24);
        }

        .nav-link {
            color: var(--color-text-secondary);
            text-decoration: none;
            font-weight: 500;
            transition: color var(--duration-normal) var(--ease-standard);
        }

        .nav-link:hover, .nav-link.active {
            color: var(--color-primary);
        }

        .nav-actions {
            display: flex;
            align-items: center;
            gap: var(--space-16);
        }

        .search-form {
            display: flex;
            border: 1px solid var(--color-card-border);
            border-radius: var(--radius-md);
            overflow: hidden;
        }

        .search-input {
            border: none;
            padding: var(--space-8) var(--space-12);
            font-size: var(--font-size-base);
            background-color: var(--color-background);
            color: var(--color-text);
        }

        .search-btn {
            background-color: var(--color-primary);
            color: white;
            border: none;
            padding: var(--space-8) var(--space-12);
            cursor: pointer;
            transition: background-color var(--duration-normal) var(--ease-standard);
        }

        .search-btn:hover {
            background-color: #388E3C; /* Darker green */
        }

        .btn {
            padding: var(--space-8) var(--space-16);
            border-radius: var(--radius-md);
            cursor: pointer;
            font-weight: 500;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-4);
            transition: all var(--duration-normal) var(--ease-standard);
        }

        .btn--primary {
            background-color: var(--color-primary);
            color: white;
            border: 1px solid var(--color-primary);
        }

        .btn--primary:hover {
            background-color: #388E3C;
            border-color: #388E3C;
        }

        .btn--secondary {
            background-color: transparent;
            color: var(--color-primary);
            border: 1px solid var(--color-primary);
        }

        .btn--secondary:hover {
            background-color: var(--color-primary);
            color: white;
        }

        .btn--sm {
            padding: var(--space-4) var(--space-8);
            font-size: var(--font-size-sm);
        }

        .btn--login {
            background-color: var(--color-accent);
            color: white;
            border: none;
        }

        .btn--login:hover {
            background-color: #1976D2; /* Darker blue */
        }

        .btn--sos {
            background-color: #f44336; /* Red */
            color: white;
            border: none;
        }

        .btn--sos:hover {
            background-color: #D32F2F; /* Darker red */
        }

        .theme-toggle {
            background: none;
            border: none;
            color: var(--color-text);
            font-size: var(--font-size-xl);
            cursor: pointer;
        }

        .mobile-menu-toggle {
            display: none; /* Hidden by default on desktop */
            flex-direction: column;
            justify-content: space-around;
            width: 30px;
            height: 20px;
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 0;
            z-index: 1001;
        }

        .mobile-menu-toggle span {
            display: block;
            width: 100%;
            height: 2px;
            background: var(--color-text);
            border-radius: 10px;
            transition: all 0.3s linear;
            position: relative;
            transform-origin: 1px;
        }

        /* Specific styles for the transport page */
        main {
            padding-top: 100px; /* Adjust for fixed navbar */
        }

        .section-header {
            text-align: center;
            margin-bottom: var(--space-40);
        }

        .section-title {
            font-size: var(--font-size-3xl);
            color: var(--color-primary);
            margin-bottom: var(--space-16);
        }

        .section-subtitle {
            font-size: var(--font-size-lg);
            color: var(--color-text-secondary);
            max-width: 700px;
            margin: 0 auto;
        }

        .transport-layout {
            display: flex;
            gap: var(--space-32);
        }

        .transport-filters {
            flex: 0 0 280px; /* Fixed width for filters */
            background: var(--color-surface);
            padding: var(--space-24);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            height: fit-content; /* Make it stick to content height */
            position: sticky;
            top: 120px; /* Position below navbar */
        }

        .transport-filters h4 {
            font-size: var(--font-size-xl);
            color: var(--color-text);
            margin-bottom: var(--space-24);
            border-bottom: 1px solid var(--color-card-border);
            padding-bottom: var(--space-12);
        }

        .form-group {
            margin-bottom: var(--space-20);
        }

        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: var(--space-8);
            color: var(--color-text);
        }

        .form-control {
            width: 100%;
            padding: var(--space-12);
            border: 1px solid var(--color-card-border);
            border-radius: var(--radius-md);
            background-color: var(--color-background);
            color: var(--color-text);
            font-size: var(--font-size-base);
            appearance: none; /* Remove default arrow for select */
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E');
            background-repeat: no-repeat;
            background-position: right 0.7em top 50%, 0 0;
            background-size: 0.65em auto, 100%;
            padding-right: 2.5em;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: var(--space-8);
        }

        .form-check-input {
            width: 1.25rem;
            height: 1.25rem;
            accent-color: var(--color-primary); /* Checkbox color */
        }

        .form-check-label {
            font-weight: 500;
            color: var(--color-text);
        }

        .text-sm {
            font-size: var(--font-size-sm);
        }

        .text-secondary-accent {
            color: var(--color-text-secondary);
        }

        .mt-8 {
            margin-top: var(--space-32);
        }

        .transport-content {
            flex: 1;
        }

        .transport-toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-24);
            flex-wrap: wrap;
            gap: var(--space-16);
        }

        .transport-toolbar .sort-group {
            display: flex;
            align-items: center;
            gap: var(--space-8);
        }

        .transport-grid, .guides-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--space-24);
            margin-bottom: var(--space-40);
        }

        .transport-card, .guide-card {
            background: var(--color-surface);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            overflow: hidden;
            transition: all var(--duration-normal) var(--ease-standard);
            display: flex;
            flex-direction: column;
            border: 1px solid var(--color-card-border);
        }

        .transport-card:hover, .guide-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .card-header {
            position: relative;
            height: 180px;
            overflow: hidden;
        }

        .card-header img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform var(--duration-normal) var(--ease-standard);
        }

        .transport-card:hover .card-header img, .guide-card:hover .card-header img {
            transform: scale(1.05);
        }

        .card-badge {
            position: absolute;
            top: var(--space-12);
            right: var(--space-12);
            background-color: var(--color-primary);
            color: white;
            padding: var(--space-4) var(--space-8);
            border-radius: var(--radius-md);
            font-size: var(--font-size-sm);
            display: flex;
            align-items: center;
            gap: var(--space-4);
        }

        .card-body {
            padding: var(--space-20);
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .card-title {
            font-size: var(--font-size-xl);
            font-weight: 600;
            color: var(--color-text);
            margin-bottom: var(--space-8);
        }

        .card-meta {
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
            margin-bottom: var(--space-4);
        }

        .card-description {
            font-size: var(--font-size-base);
            color: var(--color-text-secondary);
            margin-top: var(--space-12);
            margin-bottom: var(--space-16);
            flex-grow: 1;
        }

        .card-price {
            font-size: var(--font-size-lg);
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: var(--space-16);
        }

        .card-actions {
            display: flex;
            gap: var(--space-12);
            margin-top: auto; /* Push actions to bottom */
        }

        /* Guide specific styles within transport page */
        .guide-card .card-badge {
            background-color: var(--color-accent);
        }
        .guide-card .card-badge i {
            color: var(--color-secondary);
        }

        /* No options found message */
        .no-options-message {
            text-align: center;
            padding: var(--space-40);
            font-size: var(--font-size-xl);
            color: var(--color-text-secondary);
            display: none; /* Hidden by default */
            grid-column: 1 / -1; /* Span across all columns */
        }

        /* Modal for Details */
        .modal {
            display: none; /* Hidden by default */
            position: fixed;
            z-index: 1002; /* Higher than navbar */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.7);
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: var(--color-surface);
            margin: auto;
            padding: var(--space-32);
            border-radius: var(--radius-lg);
            width: 90%;
            max-width: 900px;
            box-shadow: var(--shadow-lg);
            position: relative;
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-32);
        }

        .modal-close-btn {
            color: var(--color-text-secondary);
            position: absolute;
            top: var(--space-16);
            right: var(--space-16);
            font-size: var(--font-size-2xl);
            font-weight: bold;
            cursor: pointer;
        }

        .modal-close-btn:hover,
        .modal-close-btn:focus {
            color: var(--color-text);
            text-decoration: none;
            cursor: pointer;
        }

        .modal-image-container {
            flex: 1 1 300px;
            max-height: 400px;
            overflow: hidden;
            border-radius: var(--radius-md);
        }

        .modal-image-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .modal-details {
            flex: 1 1 450px;
            display: flex;
            flex-direction: column;
        }

        .modal-details h2 {
            font-size: var(--font-size-3xl);
            margin-bottom: var(--space-12);
            color: var(--color-text);
        }

        .modal-details p {
            font-size: var(--font-size-base);
            color: var(--color-text-secondary);
            margin-bottom: var(--space-12);
        }

        .modal-details strong {
            color: var(--color-text);
        }

        .modal-details .price {
            font-size: var(--font-size-2xl);
            margin-top: var(--space-20);
            margin-bottom: var(--space-24);
        }

        .modal-details .modal-actions {
            margin-top: var(--space-24);
        }

        /* Footer styles (assuming they are in style.css, but adding basic structure here for context) */
        .footer {
            background-color: var(--color-surface);
            color: var(--color-text-secondary);
            padding: var(--space-48) 0 var(--space-24);
            border-top: 1px solid var(--color-card-border);
            margin-top: var(--space-40);
        }

        .footer-content {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            gap: var(--space-32);
            margin-bottom: var(--space-32);
        }

        .footer-section {
            flex: 1 1 200px;
            min-width: 200px;
        }

        .footer-logo span {
            font-size: var(--font-size-xl);
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: var(--space-12);
            display: block;
        }

        .footer-section h4 {
            font-size: var(--font-size-lg);
            color: var(--color-text);
            margin-bottom: var(--space-16);
        }

        .footer-section ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .footer-section ul li {
            margin-bottom: var(--space-8);
        }

        .footer-section ul li a {
            color: var(--color-text-secondary);
            text-decoration: none;
            transition: color var(--duration-normal) var(--ease-standard);
        }

        .footer-section ul li a:hover {
            color: var(--color-primary);
        }

        .social-links a {
            color: var(--color-text-secondary);
            font-size: var(--font-size-xl);
            margin-right: var(--space-12);
            transition: color var(--duration-normal) var(--ease-standard);
        }

        .social-links a:hover {
            color: var(--color-primary);
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: var(--space-8);
            margin-bottom: var(--space-8);
        }

        .contact-item i {
            color: var(--color-primary);
        }

        .footer-bottom {
            text-align: center;
            padding-top: var(--space-24);
            border-top: 1px solid var(--color-card-border);
        }

        /* Responsive Adjustments */
        @media (max-width: 1024px) {
            .nav-links {
                gap: var(--space-16);
            }
            .transport-layout {
                flex-direction: column;
            }
            .transport-filters {
                flex: none;
                width: 100%;
                position: static; /* Remove sticky behavior */
                margin-bottom: var(--space-32);
            }
            .transport-grid, .guides-grid {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            }
            .modal-content {
                flex-direction: column;
                max-width: 600px;
            }
            .modal-image-container {
                max-height: 300px;
            }
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
                flex-direction: column;
                position: absolute;
                top: 100%;
                left: 0;
                width: 100%;
                background-color: var(--color-surface);
                box-shadow: var(--shadow-md);
                padding: var(--space-16) 0;
                border-top: 1px solid var(--color-card-border);
            }

            .nav-links.active {
                display: flex;
            }

            .nav-link {
                padding: var(--space-8) var(--space-20);
                text-align: center;
            }

            .nav-actions {
                gap: var(--space-8);
            }

            .search-form {
                display: none; /* Hide search form on smaller screens */
            }

            .mobile-menu-toggle {
                display: flex;
            }

            main {
                padding-top: 80px; /* Adjust for smaller navbar */
            }

            .section-title {
                font-size: var(--font-size-2xl);
            }

            .section-subtitle {
                font-size: var(--font-size-base);
            }

            .transport-toolbar {
                flex-direction: column;
                align-items: flex-start;
            }

            .transport-toolbar .sort-group {
                width: 100%;
                justify-content: space-between;
            }

            .transport-grid, .guides-grid {
                grid-template-columns: 1fr; /* Single column on very small screens */
            }

            .footer-content {
                flex-direction: column;
                text-align: center;
            }

            .footer-section {
                min-width: unset;
                width: 100%;
            }

            .social-links {
                margin-top: var(--space-16);
            }

            .contact-item {
                justify-content: center;
            }
        }

        @media (max-width: 480px) {
            .nav-container {
                padding: 0 var(--space-12);
            }
            .nav-logo .logo-text {
                font-size: var(--font-size-lg);
            }
            .btn--login, .btn--sos {
                padding: var(--space-4) var(--space-8);
                font-size: var(--font-size-sm);
            }
            main {
                padding-top: 70px;
            }
            .section-title {
                font-size: var(--font-size-xl);
            }
            .transport-filters {
                padding: var(--space-16);
            }
            .form-group {
                margin-bottom: var(--space-16);
            }
            .form-control {
                padding: var(--space-8);
            }
            .modal-content {
                padding: var(--space-20);
            }
            .modal-details h2 {
                font-size: var(--font-size-2xl);
            }
            .modal-details p {
                font-size: var(--font-size-base);
            }
            .modal-details .price {
                font-size: var(--font-size-xl);
            }
            .modal-details .modal-actions {
                flex-direction: column;
            }
            .modal-details .modal-actions .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <span class="logo-text">Jharkhand Explorer </span>
            </div>

            <div class="nav-links" id="navLinks">
                <a href="/" class="nav-link">Home</a>
                <a href="heritage.html" class="nav-link">Rich Cultural Heritage</a>
                <a href="/guides.html" class="nav-link">Guides</a>
                <a href="/transport.html" class="nav-link active">Transportation & Guide</a>
                <a href="/contact.html" class="nav-link">Contact</a>
               
                <a href="/shop.html" class="nav-link">Shop</a>
            </div>

            <div class="nav-actions">
                <form class="search-form" id="searchForm" role="search">
                    <label for="searchInput" class="sr-only">Search</label>
                    <input type="search" placeholder="Search..." class="search-input" id="searchInput" aria-label="Search transportation or guides">
                    <button type="submit" class="search-btn" aria-label="Submit search">
                        <i class="fas fa-search"></i>
                    </button>
                </form>

                <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
                    <i class="fas fa-moon"></i>
                </button>

                <button class="btn btn--login">Login</button>

                <button class="btn btn--sos" id="sosButton" aria-label="Emergency SOS">
                    <i class="fas fa-exclamation-triangle"></i> SOS
                </button>

                <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Toggle mobile menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </div>
    </nav>

    <main>
        <section class="transport-section" id="transportation">
            <div class="container">
                <div class="section-header">
                    <h1 class="section-title">Transportation & Guide Services</h1>
                    <p class="section-subtitle">Seamless travel and expert guidance for your Jharkhand adventure.</p>
                </div>

                <div class="transport-layout">
                    <aside class="transport-filters" aria-labelledby="filter-heading">
                        <h4 id="filter-heading">Filter Options</h4>

                        <h5 class="form-label">Transportation Filters</h5>
                        <div class="form-group">
                            <label for="transportCategoryFilter" class="form-label sr-only">Category</label>
                            <select class="form-control" id="transportCategoryFilter" aria-label="Filter transportation by category">
                                <option value="all">All Categories</option>
                                <option value="Intercity">Intercity</option>
                                <option value="Local">Local</option>
                                <option value="Bike/Scooter">Bike/Scooter Rental</option>
                                <option value="Airport">Airport Transfer</option>
                                <option value="Tour">Tour Shuttle</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="transportVehicleTypeFilter" class="form-label sr-only">Vehicle Type</label>
                            <select class="form-control" id="transportVehicleTypeFilter" aria-label="Filter transportation by vehicle type">
                                <option value="all">All Types</option>
                                <option value="Sedan">Sedan</option>
                                <option value="Hatchback">Hatchback</option>
                                <option value="SUV">SUV</option>
                                <option value="Scooter">Scooter</option>
                                <option value="Tempo Traveller">Tempo Traveller</option>
                                <option value="Bus">Bus</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="transportACFilter" class="form-label sr-only">AC Availability</label>
                            <select class="form-control" id="transportACFilter" aria-label="Filter transportation by AC availability">
                                <option value="all">Any AC Status</option>
                                <option value="true">AC Available</option>
                                <option value="false">Non-AC</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="transportCapacityFilter" class="form-label sr-only">Min. Capacity</label>
                            <select class="form-control" id="transportCapacityFilter" aria-label="Filter transportation by minimum capacity">
                                <option value="0">Any Capacity</option>
                                <option value="2">2+ Persons</option>
                                <option value="4">4+ Persons</option>
                                <option value="6">6+ Persons</option>
                                <option value="10">10+ Persons</option>
                                <option value="20">20+ Persons</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="transportPriceFilter" class="form-label sr-only">Price Range</label>
                            <select class="form-control" id="transportPriceFilter" aria-label="Filter transportation by price range">
                                <option value="all">Any Price</option>
                                <option value="0-1000">Below ₹1000</option>
                                <option value="1000-3000">₹1000 - ₹3000</option>
                                <option value="3000-5000">₹3000 - ₹5000</option>
                                <option value="5000+">Above ₹5000</option>
                            </select>
                        </div>

                        <h5 class="mt-8 form-label">Guide Filters (Optional)</h5>
                        <div class="form-group">
                            <label for="guideLocationFilter" class="form-label sr-only">Guide Location</label>
                            <select class="form-control" id="guideLocationFilter" aria-label="Filter guides by location">
                                <option value="all">All Locations</option>
                                <option value="Ranchi">Ranchi</option>
                                <option value="Latehar">Latehar</option>
                                <option value="Deoghar">Deoghar</option>
                                <option value="Giridih">Giridih</option>
                                <option value="Jamshedpur">Jamshedpur</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="guideLanguageFilter" class="form-label sr-only">Guide Language</label>
                            <select class="form-control" id="guideLanguageFilter" aria-label="Filter guides by language">
                                <option value="all">Any Language</option>
                                <option value="English">English</option>
                                <option value="Hindi">Hindi</option>
                                <option value="Santhali">Santhali</option>
                                <option value="Oraon">Oraon</option>
                            </select>
                        </div>
                        <div class="form-group checkbox-group">
                            <input type="checkbox" id="guideFemaleFriendlyFilter" class="form-check-input" aria-label="Show female guides only">
                            <label for="guideFemaleFriendlyFilter" class="form-check-label">Female Guide Available</label>
                        </div>
                        <button class="btn btn--primary" id="applyFiltersBtn" style="width: 100%; margin-top: var(--space-16);">Apply Filters</button>
                    </aside>

                    <div class="transport-content">
                        <section class="mb-8">
                            <div class="transport-toolbar">
                                <h2 class="section-title">Travel Options</h2>
                                <div class="sort-group">
                                    <label for="transportSortOrder" class="form-label sr-only">Sort Transportation By:</label>
                                    <select class="form-control" id="transportSortOrder" aria-label="Sort transportation by">
                                        <option value="default">Default</option>
                                        <option value="price-asc">Price (Low to High)</option>
                                        <option value="price-desc">Price (High to Low)</option>
                                        <option value="capacity-desc">Capacity (High to Low)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="transport-grid" id="transportGrid">
                                <!-- Transportation items will be loaded here by JavaScript -->
                            </div>
                            <div class="no-options-message" id="noTransportMessage" aria-live="polite">
                                No transportation options found matching your criteria.
                            </div>
                        </section>

                        <section>
                            <div class="transport-toolbar">
                                <h2 class="section-title">Available Guides</h2>
                                <div class="sort-group">
                                    <label for="guideSortOrder" class="form-label sr-only">Sort Guides By:</label>
                                    <select class="form-control" id="guideSortOrder" aria-label="Sort guides by">
                                        <option value="default">Default</option>
                                        <option value="rating-desc">Rating (High to Low)</option>
                                        <option value="price-asc">Price (Low to High)</option>
                                        <option value="price-desc">Price (High to Low)</option>
                                        <option value="name-asc">Name (A-Z)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="guides-grid" id="guidesGrid">
                                <!-- Guides will be loaded here by JavaScript -->
                            </div>
                            <div class="no-options-message" id="noGuidesMessage" aria-live="polite">
                                No guides found matching your criteria.
                            </div>
                        </section>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Transport Detail Modal -->
    <div id="transportDetailModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTransportName">
        <div class="modal-content">
            <span class="modal-close-btn" id="modalTransportCloseBtn" aria-label="Close transportation details">&times;</span>
            <div class="modal-image-container">
                <img src="" alt="Vehicle Image" id="modalTransportImage">
            </div>
            <div class="modal-details">
                <h2 id="modalTransportName"></h2>
                <p><strong>Category:</strong> <span id="modalTransportCategory"></span></p>
                <p><strong>Vehicle Type:</strong> <span id="modalTransportVehicleType"></span></p>
                <p><strong>Capacity:</strong> <span id="modalTransportCapacity"></span> Persons</p>
                <p><strong>AC Available:</strong> <span id="modalTransportAC"></span></p>
                <p id="modalTransportDescription"></p>
                <div class="price" id="modalTransportPrice"></div>
                <div class="modal-actions">
                    <button class="btn btn--primary" id="modalTransportBookBtn">Book Now</button>
                    <button class="btn btn--secondary" id="modalTransportQuoteBtn">Request Quote</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Guide Detail Modal (re-using structure from guides.html) -->
    <div id="guideDetailModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modalGuideName">
        <div class="modal-content">
            <span class="modal-close-btn" id="modalGuideCloseBtn" aria-label="Close guide details">&times;</span>
            <div class="modal-image-container">
                <img src="" alt="Guide Profile Picture" id="modalGuideImage">
            </div>
            <div class="modal-details">
                <h2 id="modalGuideName"></h2>
                <p><strong>Rating:</strong> <span id="modalGuideRating"></span> <i class="fas fa-star"></i></p>
                <p><strong>Location:</strong> <span id="modalGuideLocation"></span></p>
                <p><strong>Languages:</strong> <span id="modalGuideLanguages"></span></p>
                <p><strong>Specialties:</strong> <span id="modalGuideCategories"></span></p>
                <p id="modalGuideBio"></p>
                <div class="price" id="modalGuidePrice"></div>
                <div class="modal-actions">
                    <button class="btn btn--primary" id="modalGuideBookBtn">Book Now</button>
                    <button class="btn btn--secondary" id="modalGuideContactBtn">Contact Guide</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-logo">
                        <span>Jharkhand Explorer</span>
                    </div>
                    <p>Discover the incredible beauty of Jharkhand with our AI-powered travel platform.</p>
                    <div class="social-links">
                        <a href="#" target="_blank" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
                        <a href="#" target="_blank" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" target="_blank" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" target="_blank" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>

                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="/">Home</a></li>
                        <li><a href="/heritage/">Rich Cultural Heritage</a></li>
                        <li><a href="/guides/">Guides</a></li>
                        <li><a href="/transport/">Transportation & Guide</a></li>
                        <li><a href="/contact/">Contact</a></li>
                        <li><a href="/shop.html">Shop</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h4>Services</h4>
                    <ul>
                        <li><a href="/#ai-planner">AI Trip Planner</a></li>
                        <li><a href="/#accommodation">Accommodation</a></li>
                        <li><a href="/guides/">Local Guides</a></li>
                        <li><a href="/transport/">Transportation</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h4>Contact Info</h4>
                    <div class="contact-info">
                        <div class="contact-item">
                            <i class="fas fa-phone"></i>
                            <span>+91 12345 67890</span>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-envelope"></i>
                            <span>info@jharkhandexplorer.com</span>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>Ranchi, Jharkhand, India</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="footer-bottom">
                <div class="footer-text">
                    <p>&copy; 2025 Jharkhand Explorer. All rights reserved.</p>
                </div>
            </div>
        </div>
    </footer>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vanilla-tilt@1.7.2/dist/vanilla-tilt.min.js"></script>
    <script src="/app.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Sample Data ---
            const allTransportOptions = [
                {
                    id: 1,
                    name: "Sedan Car Rental",
                    category: "Intercity",
                    vehicleType: "Sedan",
                    capacity: 4,
                    acAvailable: true,
                    pricePerDay: 2500,
                    image: "https://images.unsplash.com/photo-1583121274602-3e2820c691e7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                    description: "Comfortable AC sedan for intercity travel or local sightseeing. Professional driver included. Ideal for small families or business trips."
                },
                {
                    id: 2,
                    name: "Hatchback for Local",
                    category: "Local",
                    vehicleType: "Hatchback",
                    capacity: 4,
                    acAvailable: false,
                    pricePerDay: 1200,
                    image: "https://images.unsplash.com/photo-1502877338535-766e1fd4baeb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                    description: "Economical non-AC hatchback for local city commutes and short trips. Self-drive option available. Perfect for budget travelers."
                },
                {
                    id: 3,
                    name: "SUV for Group Tours",
                    category: "Tour",
                    vehicleType: "SUV",
                    capacity: 7,
                    acAvailable: true,
                    pricePerDay: 3500,
                    image: "https://images.unsplash.com/photo-1542282085-cd203552b6f7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                    description: "Spacious AC SUV with a professional driver, ideal for group tours to remote locations or comfortable family travel. Equipped for rough terrains."
                },
                {
                    id: 4,
                    name: "Scooter Rental",
                    category: "Bike/Scooter",
                    vehicleType: "Scooter",
                    capacity: 2,
                    acAvailable: false,
                    pricePerDay: 400,
                    image: "https://images.unsplash.com/photo-1558981852-426c617342b6?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                    description: "Convenient scooter rental for exploring cities at your own pace. Helmet included. Perfect for solo travelers or couples."
                },
                {
                    id: 5,
                    name: "Tempo Traveller (12-seater)",
                    category: "Tour",
                    vehicleType: "Tempo Traveller",
                    capacity: 12,
                    acAvailable: true,
                    pricePerDay: 6000,
                    image: "https://images.unsplash.com/photo-1594394908987-0121525c012d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                    description: "Luxury AC Tempo Traveller for large groups, family outings, or corporate travel. Comfortable seating and ample luggage space."
                },
                {
                    id: 6,
                    name: "Airport Transfer Sedan",
                    category: "Airport",
                    vehicleType: "Sedan",
                    capacity: 3,
                    acAvailable: true,
                    pricePerDay: 1000, // Price for a single transfer, not per day
                    image: "https://images.unsplash.com/photo-1568605117036-ba68f9edd8d9?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                    description: "Reliable and punctual AC sedan for airport pickups and drops. Avoid the hassle of public transport."
                }
            ];

            const allGuides = [
                {
                    id: 101,
                    name: "Priya Sharma",
                    location: "Ranchi",
                    languages: ["English", "Hindi", "Santhali"],
                    categories: ["Culture", "Nature", "Historical"],
                    rating: 4.8,
                    pricePerDay: 2500,
                    image: "https://images.unsplash.com/photo-1534528741775-53994a69daeb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                    bio: "A passionate local historian with deep knowledge of Jharkhand's tribal culture and ancient sites. Priya loves sharing stories and hidden gems of Ranchi and surrounding areas. Specializes in personalized cultural tours.",
                    isFemale: true
                },
                {
                    id: 102,
                    name: "Amit Kumar",
                    location: "Latehar",
                    languages: ["Hindi", "English", "Oraon"],
                    categories: ["Adventure", "Wildlife", "Trekking"],
                    rating: 4.5,
                    pricePerDay: 2800,
                    image: "https://images.unsplash.com/photo-1500648767791-00dcc994a43e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                    bio: "An experienced adventure guide, Amit knows the dense forests and waterfalls of Latehar like the back of his hand. Perfect for wildlife enthusiasts and trekkers looking for an adrenaline rush. Certified in first aid.",
                    isFemale: false
                },
                {
                    id: 103,
                    name: "Sunita Devi",
                    location: "Deoghar",
                    languages: ["Hindi", "Bengali"],
                    categories: ["Religious", "Culture"],
                    rating: 4.9,
                    pricePerDay: 2000,
                    image: "https://images.unsplash.com/photo-1580489944761-15a19d654956?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                    bio: "Sunita is a spiritual guide specializing in the sacred sites of Deoghar, including the Baidyanath Dham temple. She provides insightful tours into the religious significance and local traditions. Highly recommended for pilgrims.",
                    isFemale: true
                },
                {
                    id: 104,
                    name: "Rajesh Singh",
                    location: "Giridih",
                    languages: ["Hindi", "English"],
                    categories: ["Nature", "Trekking"],
                    rating: 4.2,
                    pricePerDay: 1800,
                    image: "https://images.unsplash.com/photo-1507003211169-e695c6edd65d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                    bio: "Rajesh is a nature lover and an expert on the flora and fauna of Giridih. He leads serene treks to Usri Falls and Parasnath Hill, offering a peaceful escape into nature. Great for bird watching.",
                    isFemale: false
                }
            ];

            let displayedTransport = [...allTransportOptions];
            let displayedGuides = [...allGuides];

            // --- DOM Elements ---
            const transportGrid = document.getElementById('transportGrid');
            const guidesGrid = document.getElementById('guidesGrid');
            const noTransportMessage = document.getElementById('noTransportMessage');
            const noGuidesMessage = document.getElementById('noGuidesMessage');

            // Filter Elements
            const transportCategoryFilter = document.getElementById('transportCategoryFilter');
            const transportVehicleTypeFilter = document.getElementById('transportVehicleTypeFilter');
            const transportACFilter = document.getElementById('transportACFilter');
            const transportCapacityFilter = document.getElementById('transportCapacityFilter');
            const transportPriceFilter = document.getElementById('transportPriceFilter');

            const guideLocationFilter = document.getElementById('guideLocationFilter');
            const guideLanguageFilter = document.getElementById('guideLanguageFilter');
            const guideFemaleFriendlyFilter = document.getElementById('guideFemaleFriendlyFilter');
            const applyFiltersBtn = document.getElementById('applyFiltersBtn');

            // Sort Elements
            const transportSortOrder = document.getElementById('transportSortOrder');
            const guideSortOrder = document.getElementById('guideSortOrder');

            // Search Element
            const searchInput = document.getElementById('searchInput');
            const searchForm = document.getElementById('searchForm');

            // Modals
            const transportDetailModal = document.getElementById('transportDetailModal');
            const modalTransportCloseBtn = document.getElementById('modalTransportCloseBtn');
            const modalTransportImage = document.getElementById('modalTransportImage');
            const modalTransportName = document.getElementById('modalTransportName');
            const modalTransportCategory = document.getElementById('modalTransportCategory');
            const modalTransportVehicleType = document.getElementById('modalTransportVehicleType');
            const modalTransportCapacity = document.getElementById('modalTransportCapacity');
            const modalTransportAC = document.getElementById('modalTransportAC');
            const modalTransportDescription = document.getElementById('modalTransportDescription');
            const modalTransportPrice = document.getElementById('modalTransportPrice');
            const modalTransportBookBtn = document.getElementById('modalTransportBookBtn');
            const modalTransportQuoteBtn = document.getElementById('modalTransportQuoteBtn');

            const guideDetailModal = document.getElementById('guideDetailModal');
            const modalGuideCloseBtn = document.getElementById('modalGuideCloseBtn');
            const modalGuideImage = document.getElementById('modalGuideImage');
            const modalGuideName = document.getElementById('modalGuideName');
            const modalGuideRating = document.getElementById('modalGuideRating');
            const modalGuideLocation = document.getElementById('modalGuideLocation');
            const modalGuideLanguages = document.getElementById('modalGuideLanguages');
            const modalGuideCategories = document.getElementById('modalGuideCategories');
            const modalGuideBio = document.getElementById('modalGuideBio');
            const modalGuidePrice = document.getElementById('modalGuidePrice');
            const modalGuideBookBtn = document.getElementById('modalGuideBookBtn');
            const modalGuideContactBtn = document.getElementById('modalGuideContactBtn');


            // --- Functions ---

            /**
             * Creates an HTML transport card element.
             * @param {object} option - The transport option data.
             * @returns {HTMLElement} The transport card div.
             */
            function createTransportCard(option) {
                const card = document.createElement('div');
                card.className = 'transport-card';
                card.setAttribute('data-id', option.id);
                card.innerHTML = `
                    <div class="card-header">
                        <img src="${option.image}" alt="${option.name}" loading="lazy">
                        <div class="card-badge">${option.acAvailable ? 'AC' : 'Non-AC'}</div>
                    </div>
                    <div class="card-body">
                        <h3 class="card-title">${option.name}</h3>
                        <p class="card-meta"><i class="fas fa-car"></i> ${option.vehicleType} | <i class="fas fa-users"></i> ${option.capacity} Persons</p>
                        <p class="card-meta"><i class="fas fa-tag"></i> ${option.category}</p>
                        <p class="card-description">${option.description.substring(0, 100)}...</p>
                        <div class="card-price">₹${option.pricePerDay.toLocaleString()}/day</div>
                        <div class="card-actions">
                            <button class="btn btn--primary btn--sm view-transport-details-btn" data-id="${option.id}">View Details</button>
                            <button class="btn btn--secondary btn--sm book-transport-btn" data-id="${option.id}" data-name="${option.name}">Book Now</button>
                        </div>
                    </div>
                `;
                return card;
            }

            /**
             * Creates an HTML guide card element.
             * @param {object} guide - The guide data.
             * @returns {HTMLElement} The guide card div.
             */
            function createGuideCard(guide) {
                const card = document.createElement('div');
                card.className = 'guide-card';
                card.setAttribute('data-id', guide.id);
                card.innerHTML = `
                    <div class="card-header">
                        <img src="${guide.image}" alt="${guide.name}'s profile picture" loading="lazy">
                        <div class="card-badge" aria-label="Rating: ${guide.rating} out of 5 stars">
                            <i class="fas fa-star"></i> ${guide.rating.toFixed(1)}
                        </div>
                    </div>
                    <div class="card-body">
                        <h3 class="card-title">${guide.name}</h3>
                        <p class="card-meta"><i class="fas fa-map-marker-alt"></i> ${guide.location}</p>
                        <p class="card-meta"><i class="fas fa-language"></i> ${guide.languages.join(', ')}</p>
                        <p class="card-description">${guide.bio.substring(0, 100)}...</p>
                        <div class="card-price">₹${guide.pricePerDay.toLocaleString()}/day</div>
                        <div class="card-actions">
                            <button class="btn btn--primary btn--sm view-guide-details-btn" data-id="${guide.id}">View Profile</button>
                            <button class="btn btn--secondary btn--sm book-guide-btn" data-id="${guide.id}" data-name="${guide.name}">Book Now</button>
                        </div>
                    </div>
                `;
                return card;
            }

            /**
             * Renders transport options to the grid.
             * @param {Array} optionsToRender - The array of transport options to display.
             */
            function renderTransport(optionsToRender) {
                transportGrid.innerHTML = '';
                if (optionsToRender.length === 0) {
                    noTransportMessage.style.display = 'block';
                } else {
                    noTransportMessage.style.display = 'none';
                    optionsToRender.forEach(option => {
                        transportGrid.appendChild(createTransportCard(option));
                    });
                    VanillaTilt.init(document.querySelectorAll(".transport-card"), {
                        max: 5, speed: 400, glare: true, "max-glare": 0.2
                    });
                }
            }

            /**
             * Renders guides to the grid.
             * @param {Array} guidesToRender - The array of guides to display.
             */
            function renderGuides(guidesToRender) {
                guidesGrid.innerHTML = '';
                if (guidesToRender.length === 0) {
                    noGuidesMessage.style.display = 'block';
                } else {
                    noGuidesMessage.style.display = 'none';
                    guidesToRender.forEach(guide => {
                        guidesGrid.appendChild(createGuideCard(guide));
                    });
                    VanillaTilt.init(document.querySelectorAll(".guide-card"), {
                        max: 5, speed: 400, glare: true, "max-glare": 0.2
                    });
                }
            }

            /**
             * Applies filters and sorting to both transport and guides.
             */
            function applyFiltersAndSort() {
                // --- Filter Transport Options ---
                let filteredTransport = [...allTransportOptions];

                const tCategory = transportCategoryFilter.value;
                if (tCategory !== 'all') {
                    filteredTransport = filteredTransport.filter(t => t.category === tCategory);
                }
                const tVehicleType = transportVehicleTypeFilter.value;
                if (tVehicleType !== 'all') {
                    filteredTransport = filteredTransport.filter(t => t.vehicleType === tVehicleType);
                }
                const tAC = transportACFilter.value;
                if (tAC !== 'all') {
                    filteredTransport = filteredTransport.filter(t => t.acAvailable === (tAC === 'true'));
                }
                const tCapacity = parseInt(transportCapacityFilter.value);
                if (tCapacity > 0) {
                    filteredTransport = filteredTransport.filter(t => t.capacity >= tCapacity);
                }
                const tPriceRange = transportPriceFilter.value;
                if (tPriceRange !== 'all') {
                    const [min, max] = tPriceRange.split('-').map(Number);
                    if (tPriceRange.endsWith('+')) {
                        filteredTransport = filteredTransport.filter(t => t.pricePerDay >= min);
                    } else {
                        filteredTransport = filteredTransport.filter(t => t.pricePerDay >= min && t.pricePerDay <= max);
                    }
                }

                // --- Filter Guides ---
                let filteredGuides = [...allGuides];

                const gLocation = guideLocationFilter.value;
                if (gLocation !== 'all') {
                    filteredGuides = filteredGuides.filter(g => g.location === gLocation);
                }
                const gLanguage = guideLanguageFilter.value;
                if (gLanguage !== 'all') {
                    filteredGuides = filteredGuides.filter(g => g.languages.includes(gLanguage));
                }
                if (guideFemaleFriendlyFilter.checked) {
                    filteredGuides = filteredGuides.filter(g => g.isFemale === true);
                }

                // --- Apply Search Query to both ---
                const searchQuery = searchInput.value.toLowerCase().trim();
                if (searchQuery) {
                    filteredTransport = filteredTransport.filter(t =>
                        t.name.toLowerCase().includes(searchQuery) ||
                        t.description.toLowerCase().includes(searchQuery) ||
                        t.category.toLowerCase().includes(searchQuery) ||
                        t.vehicleType.toLowerCase().includes(searchQuery)
                    );
                    filteredGuides = filteredGuides.filter(g =>
                        g.name.toLowerCase().includes(searchQuery) ||
                        g.location.toLowerCase().includes(searchQuery) ||
                        g.languages.some(lang => lang.toLowerCase().includes(searchQuery)) ||
                        g.categories.some(cat => cat.toLowerCase().includes(searchQuery)) ||
                        g.bio.toLowerCase().includes(searchQuery)
                    );
                }

                // --- Sort Transport Options ---
                const tSortOption = transportSortOrder.value;
                if (tSortOption === 'price-asc') {
                    filteredTransport.sort((a, b) => a.pricePerDay - b.pricePerDay);
                } else if (tSortOption === 'price-desc') {
                    filteredTransport.sort((a, b) => b.pricePerDay - a.pricePerDay);
                } else if (tSortOption === 'capacity-desc') {
                    filteredTransport.sort((a, b) => b.capacity - a.capacity);
                }

                // --- Sort Guides ---
                const gSortOption = guideSortOrder.value;
                if (gSortOption === 'rating-desc') {
                    filteredGuides.sort((a, b) => b.rating - a.rating);
                } else if (gSortOption === 'price-asc') {
                    filteredGuides.sort((a, b) => a.pricePerDay - b.pricePerDay);
                } else if (gSortOption === 'price-desc') {
                    filteredGuides.sort((a, b) => b.pricePerDay - a.pricePerDay);
                } else if (gSortOption === 'name-asc') {
                    filteredGuides.sort((a, b) => a.name.localeCompare(b.name));
                }

                displayedTransport = filteredTransport;
                displayedGuides = filteredGuides;

                renderTransport(displayedTransport);
                renderGuides(displayedGuides);
            }

            /**
             * Opens the transport detail modal.
             * @param {object} option - The transport option data.
             */
            function openTransportDetailModal(option) {
                modalTransportImage.src = option.image;
                modalTransportImage.alt = option.name;
                modalTransportName.textContent = option.name;
                modalTransportCategory.textContent = option.category;
                modalTransportVehicleType.textContent = option.vehicleType;
                modalTransportCapacity.textContent = option.capacity;
                modalTransportAC.textContent = option.acAvailable ? 'Yes' : 'No';
                modalTransportDescription.textContent = option.description;
                modalTransportPrice.textContent = `₹${option.pricePerDay.toLocaleString()}/day`;

                modalTransportBookBtn.setAttribute('data-id', option.id);
                modalTransportBookBtn.setAttribute('data-name', option.name);
                modalTransportQuoteBtn.setAttribute('data-id', option.id);
                modalTransportQuoteBtn.setAttribute('data-name', option.name);

                transportDetailModal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            }

            /**
             * Closes the transport detail modal.
             */
            function closeTransportDetailModal() {
                transportDetailModal.style.display = 'none';
                document.body.style.overflow = '';
            }

            /**
             * Opens the guide detail modal.
             * @param {object} guide - The guide data.
             */
            function openGuideDetailModal(guide) {
                modalGuideImage.src = guide.image;
                modalGuideImage.alt = `${guide.name}'s profile picture`;
                modalGuideName.textContent = guide.name;
                modalGuideRating.textContent = guide.rating.toFixed(1);
                modalGuideLocation.textContent = guide.location;
                modalGuideLanguages.textContent = guide.languages.join(', ');
                modalGuideCategories.textContent = guide.categories.join(', ');
                modalGuideBio.textContent = guide.bio;
                modalGuidePrice.textContent = `₹${guide.pricePerDay.toLocaleString()}/day`;

                modalGuideBookBtn.setAttribute('data-id', guide.id);
                modalGuideBookBtn.setAttribute('data-name', guide.name);
                modalGuideContactBtn.setAttribute('data-id', guide.id);
                modalGuideContactBtn.setAttribute('data-name', guide.name);

                guideDetailModal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            }

            /**
             * Closes the guide detail modal.
             */
            function closeGuideDetailModal() {
                guideDetailModal.style.display = 'none';
                document.body.style.overflow = '';
            }


            // --- Event Listeners ---

            // Initial render
            renderTransport(allTransportOptions);
            renderGuides(allGuides);

            // Filter Event Listeners
            applyFiltersBtn.addEventListener('click', applyFiltersAndSort);
            transportCategoryFilter.addEventListener('change', applyFiltersAndSort);
            transportVehicleTypeFilter.addEventListener('change', applyFiltersAndSort);
            transportACFilter.addEventListener('change', applyFiltersAndSort);
            transportCapacityFilter.addEventListener('change', applyFiltersAndSort);
            transportPriceFilter.addEventListener('change', applyFiltersAndSort);
            guideLocationFilter.addEventListener('change', applyFiltersAndSort);
            guideLanguageFilter.addEventListener('change', applyFiltersAndSort);
            guideFemaleFriendlyFilter.addEventListener('change', applyFiltersAndSort);

            // Sort Event Listeners
            transportSortOrder.addEventListener('change', applyFiltersAndSort);
            guideSortOrder.addEventListener('change', applyFiltersAndSort);

            // Search functionality
            searchForm.addEventListener('submit', (e) => {
                e.preventDefault();
                applyFiltersAndSort();
            });
            // Optional: Live search as user types (can be performance intensive for large datasets)
            // searchInput.addEventListener('input', applyFiltersAndSort);


            // Transport Grid Event Delegation
            transportGrid.addEventListener('click', (e) => {
                const target = e.target;
                if (target.classList.contains('view-transport-details-btn')) {
                    const id = parseInt(target.dataset.id);
                    const option = allTransportOptions.find(t => t.id === id);
                    if (option) openTransportDetailModal(option);
                } else if (target.classList.contains('book-transport-btn')) {
                    const name = target.dataset.name;
                    alert(`Booking request initiated for ${name}. We will contact you shortly!`);
                }
            });

            // Guide Grid Event Delegation
            guidesGrid.addEventListener('click', (e) => {
                const target = e.target;
                if (target.classList.contains('view-guide-details-btn')) {
                    const id = parseInt(target.dataset.id);
                    const guide = allGuides.find(g => g.id === id);
                    if (guide) openGuideDetailModal(guide);
                } else if (target.classList.contains('book-guide-btn')) {
                    const name = target.dataset.name;
                    alert(`Booking request initiated for guide: ${name}. We will contact you shortly!`);
                }
            });

            // Transport Modal Event Listeners
            modalTransportCloseBtn.addEventListener('click', closeTransportDetailModal);
            transportDetailModal.addEventListener('click', (e) => {
                if (e.target === transportDetailModal) closeTransportDetailModal();
            });
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && transportDetailModal.style.display === 'flex') closeTransportDetailModal();
            });
            modalTransportBookBtn.addEventListener('click', (e) => {
                const name = e.target.dataset.name;
                alert(`Booking request initiated for ${name}. We will contact you shortly!`);
                closeTransportDetailModal();
            });
            modalTransportQuoteBtn.addEventListener('click', (e) => {
                const name = e.target.dataset.name;
                alert(`Quote request initiated for ${name}. We will get back to you soon!`);
                closeTransportDetailModal();
            });

            // Guide Modal Event Listeners
            modalGuideCloseBtn.addEventListener('click', closeGuideDetailModal);
            guideDetailModal.addEventListener('click', (e) => {
                if (e.target === guideDetailModal) closeGuideDetailModal();
            });
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && guideDetailModal.style.display === 'flex') closeGuideDetailModal();
            });
            modalGuideBookBtn.addEventListener('click', (e) => {
                const name = e.target.dataset.name;
                alert(`Booking request initiated for guide: ${name}. We will contact you shortly!`);
                closeGuideDetailModal();
            });
            modalGuideContactBtn.addEventListener('click', (e) => {
                const name = e.target.dataset.name;
                alert(`Opening contact form for guide: ${name}. (Demo: Imagine a contact form or email client opening)`);
                closeGuideDetailModal();
            });


            // --- General Site Functionality (from original app.js/inline script) ---

            // Theme Toggle
            const themeToggle = document.getElementById('themeToggle');
            if (themeToggle) {
                themeToggle.addEventListener('click', (e) => {
                    e.preventDefault();
                    const currentTheme = document.documentElement.getAttribute('data-theme');
                    const newTheme = currentTheme === 'light' ? 'dark' : 'light';
                    document.documentElement.setAttribute('data-theme', newTheme);
                    localStorage.setItem('theme', newTheme);
                    const icon = themeToggle.querySelector('i');
                    if (icon) {
                        icon.className = newTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
                    }
                });
                // Set initial icon based on current theme
                const currentTheme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
                document.documentElement.setAttribute('data-theme', currentTheme); // Ensure theme is set on load
                const icon = themeToggle.querySelector('i');
                if (icon) {
                    icon.className = currentTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
                }
            }

            // Mobile Menu Toggle
            const mobileMenuToggle = document.getElementById('mobileMenuToggle');
            const navLinks = document.getElementById('navLinks');
            if (mobileMenuToggle && navLinks) {
                mobileMenuToggle.addEventListener('click', (e) => {
                    e.preventDefault();
                    navLinks.classList.toggle('active');
                    mobileMenuToggle.classList.toggle('active');
                });
                // Close mobile menu when a link is clicked
                navLinks.querySelectorAll('.nav-link').forEach(link => {
                    link.addEventListener('click', () => {
                        navLinks.classList.remove('active');
                        mobileMenuToggle.classList.remove('active');
                    });
                });
            }

            // SOS Button functionality
            const sosButton = document.getElementById('sosButton');
            if (sosButton) {
                sosButton.addEventListener('click', () => {
                    alert('Emergency! Please contact local authorities or your travel guide. Emergency contact: +91 98765 43210');
                });
            }
        });
    </script>
</body>
</html>