<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rich Cultural Heritage - Jharkhand Explorer</title>
    <link rel="stylesheet" href="/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* CSS Variables for consistency */
        :root {
            --color-primary: #4CAF50; /* Green */
            --color-secondary: #FFC107; /* Amber */
            --color-accent: #2196F3; /* Blue */
            --color-text: #333;
            --color-text-secondary: #666;
            --color-background: #f8f8f8;
            --color-surface: #ffffff;
            --color-card-border: #e0e0e0;
            --color-shadow: rgba(0, 0, 0, 0.1);

            --font-size-sm: 0.875rem;
            --font-size-base: 1rem;
            --font-size-lg: 1.125rem;
            --font-size-xl: 1.25rem;
            --font-size-2xl: 1.5rem;
            --font-size-3xl: 1.875rem;
            --font-size-4xl: 2.25rem;

            --space-4: 0.25rem;
            --space-8: 0.5rem;
            --space-12: 0.75rem;
            --space-16: 1rem;
            --space-20: 1.25rem;
            --space-24: 1.5rem;
            --space-32: 2rem;
            --space-40: 2.5rem;
            --space-48: 3rem;

            --radius-sm: 0.25rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;

            --shadow-sm: 0 1px 2px var(--color-shadow);
            --shadow-md: 0 4px 6px var(--color-shadow);
            --shadow-lg: 0 10px 15px var(--color-shadow);

            --duration-normal: 0.3s;
            --ease-standard: cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Dark theme variables */
        html[data-theme="dark"] {
            --color-primary: #66BB6A; /* Lighter Green */
            --color-secondary: #FFD54F; /* Lighter Amber */
            --color-accent: #64B5F6; /* Lighter Blue */
            --color-text: #e0e0e0;
            --color-text-secondary: #a0a0a0;
            --color-background: #1a1a1a;
            --color-surface: #2a2a2a;
            --color-card-border: #444;
            --color-shadow: rgba(0, 0, 0, 0.3);
        }

        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--color-background);
            color: var(--color-text);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 var(--space-20);
        }

        /* Navbar styles (assuming they are in style.css, but adding basic structure here for context) */
        .navbar {
            background-color: var(--color-surface);
            box-shadow: var(--shadow-sm);
            position: fixed;
            width: 100%;
            top: 0;
            left: 0;
            z-index: 1000;
            padding: var(--space-16) 0;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 var(--space-20);
        }

        .nav-logo .logo-text {
            font-size: var(--font-size-xl);
            font-weight: 700;
            color: var(--color-primary);
        }

        .nav-links {
            display: flex;
            gap: var(--space-24);
        }

        .nav-link {
            color: var(--color-text-secondary);
            text-decoration: none;
            font-weight: 500;
            transition: color var(--duration-normal) var(--ease-standard);
        }

        .nav-link:hover, .nav-link.active {
            color: var(--color-primary);
        }

        .nav-actions {
            display: flex;
            align-items: center;
            gap: var(--space-16);
        }

        .search-form {
            display: flex;
            border: 1px solid var(--color-card-border);
            border-radius: var(--radius-md);
            overflow: hidden;
        }

        .search-input {
            border: none;
            padding: var(--space-8) var(--space-12);
            font-size: var(--font-size-base);
            background-color: var(--color-background);
            color: var(--color-text);
        }

        .search-btn {
            background-color: var(--color-primary);
            color: white;
            border: none;
            padding: var(--space-8) var(--space-12);
            cursor: pointer;
            transition: background-color var(--duration-normal) var(--ease-standard);
        }

        .search-btn:hover {
            background-color: #388E3C; /* Darker green */
        }

        .btn {
            padding: var(--space-8) var(--space-16);
            border-radius: var(--radius-md);
            cursor: pointer;
            font-weight: 500;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-4);
            transition: all var(--duration-normal) var(--ease-standard);
        }

        .btn--primary {
            background-color: var(--color-primary);
            color: white;
            border: 1px solid var(--color-primary);
        }

        .btn--primary:hover {
            background-color: #388E3C;
            border-color: #388E3C;
        }

        .btn--secondary {
            background-color: transparent;
            color: var(--color-primary);
            border: 1px solid var(--color-primary);
        }

        .btn--secondary:hover {
            background-color: var(--color-primary);
            color: white;
        }

        .btn--login {
            background-color: var(--color-accent);
            color: white;
            border: none;
        }

        .btn--login:hover {
            background-color: #1976D2; /* Darker blue */
        }

        .btn--sos {
            background-color: #f44336; /* Red */
            color: white;
            border: none;
        }

        .btn--sos:hover {
            background-color: #D32F2F; /* Darker red */
        }

        .theme-toggle {
            background: none;
            border: none;
            color: var(--color-text);
            font-size: var(--font-size-xl);
            cursor: pointer;
        }

        .mobile-menu-toggle {
            display: none; /* Hidden by default on desktop */
            flex-direction: column;
            justify-content: space-around;
            width: 30px;
            height: 20px;
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 0;
            z-index: 1001;
        }

        .mobile-menu-toggle span {
            display: block;
            width: 100%;
            height: 2px;
            background: var(--color-text);
            border-radius: 10px;
            transition: all 0.3s linear;
            position: relative;
            transform-origin: 1px;
        }

        /* Specific styles for the heritage page */
        main {
            padding-top: 100px; /* Adjust for fixed navbar */
        }

        .heritage-section {
            padding: var(--space-40) 0;
        }

        .section-header {
            text-align: center;
            margin-bottom: var(--space-40);
        }

        .section-title {
            font-size: var(--font-size-3xl);
            color: var(--color-primary);
            margin-bottom: var(--space-16);
        }

        .section-subtitle {
            font-size: var(--font-size-lg);
            color: var(--color-text-secondary);
            max-width: 700px;
            margin: 0 auto;
        }

        .hero-actions {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: var(--space-16);
            margin-top: var(--space-32);
        }

        .heritage-filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-24);
            background: var(--color-surface);
            padding: var(--space-24);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            margin-bottom: var(--space-40);
        }

        .form-group {
            margin-bottom: 0; /* Reset margin for grid layout */
        }

        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: var(--space-8);
            color: var(--color-text);
        }

        .form-control {
            width: 100%;
            padding: var(--space-12);
            border: 1px solid var(--color-card-border);
            border-radius: var(--radius-md);
            background-color: var(--color-background);
            color: var(--color-text);
            font-size: var(--font-size-base);
            appearance: none; /* Remove default arrow for select */
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E');
            background-repeat: no-repeat;
            background-position: right 0.7em top 50%, 0 0;
            background-size: 0.65em auto, 100%;
            padding-right: 2.5em;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: var(--space-8);
        }

        .form-check-input {
            width: 1.25rem;
            height: 1.25rem;
            accent-color: var(--color-primary); /* Checkbox color */
        }

        .form-check-label {
            font-weight: 500;
            color: var(--color-text);
        }

        .my-8 {
            margin-top: var(--space-32);
            margin-bottom: var(--space-32);
        }

        .section-heading-with-sort {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-24);
            flex-wrap: wrap;
            gap: var(--space-16);
        }

        .section-heading-with-sort .sort-group {
            display: flex;
            align-items: center;
            gap: var(--space-8);
        }

        .heritage-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--space-24);
        }

        .heritage-card {
            background: var(--color-surface);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            overflow: hidden;
            transition: all var(--duration-normal) var(--ease-standard);
            display: flex;
            flex-direction: column;
            border: 1px solid var(--color-card-border);
        }

        .heritage-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .card-image {
            position: relative;
            height: 180px;
            overflow: hidden;
        }

        .card-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform var(--duration-normal) var(--ease-standard);
        }

        .heritage-card:hover .card-image img {
            transform: scale(1.05);
        }

        .card-badge {
            position: absolute;
            top: var(--space-12);
            right: var(--space-12);
            background-color: var(--color-primary);
            color: white;
            padding: var(--space-4) var(--space-8);
            border-radius: var(--radius-md);
            font-size: var(--font-size-sm);
            display: flex;
            align-items: center;
            gap: var(--space-4);
        }

        .card-content {
            padding: var(--space-20);
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .card-title {
            font-size: var(--font-size-xl);
            font-weight: 600;
            color: var(--color-text);
            margin-bottom: var(--space-8);
        }

        .card-meta {
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
            margin-bottom: var(--space-4);
        }

        .card-description {
            font-size: var(--font-size-base);
            color: var(--color-text-secondary);
            margin-top: var(--space-12);
            margin-bottom: var(--space-16);
            flex-grow: 1;
        }

        .card-actions {
            display: flex;
            gap: var(--space-12);
            margin-top: auto; /* Push actions to bottom */
        }

        /* No items found message */
        .no-items-message {
            text-align: center;
            padding: var(--space-40);
            font-size: var(--font-size-xl);
            color: var(--color-text-secondary);
            display: none; /* Hidden by default */
            grid-column: 1 / -1; /* Span across all columns */
        }

        /* Modal for Details */
        .modal {
            display: none; /* Hidden by default */
            position: fixed;
            z-index: 1002; /* Higher than navbar */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.7);
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: var(--color-surface);
            margin: auto;
            padding: var(--space-32);
            border-radius: var(--radius-lg);
            width: 90%;
            max-width: 900px;
            box-shadow: var(--shadow-lg);
            position: relative;
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-32);
        }

        .modal-close-btn {
            color: var(--color-text-secondary);
            position: absolute;
            top: var(--space-16);
            right: var(--space-16);
            font-size: var(--font-size-2xl);
            font-weight: bold;
            cursor: pointer;
        }

        .modal-close-btn:hover,
        .modal-close-btn:focus {
            color: var(--color-text);
            text-decoration: none;
            cursor: pointer;
        }

        .modal-image-container {
            flex: 1 1 300px;
            max-height: 400px;
            overflow: hidden;
            border-radius: var(--radius-md);
        }

        .modal-image-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .modal-details {
            flex: 1 1 450px;
            display: flex;
            flex-direction: column;
        }

        .modal-details h2 {
            font-size: var(--font-size-3xl);
            margin-bottom: var(--space-12);
            color: var(--color-text);
        }

        .modal-details p {
            font-size: var(--font-size-base);
            color: var(--color-text-secondary);
            margin-bottom: var(--space-12);
        }

        .modal-details strong {
            color: var(--color-text);
        }

        .modal-details .price {
            font-size: var(--font-size-2xl);
            margin-top: var(--space-20);
            margin-bottom: var(--space-24);
        }

        .modal-details .modal-actions {
            margin-top: var(--space-24);
        }

        /* Footer styles (assuming they are in style.css, but adding basic structure here for context) */
        .footer {
            background-color: var(--color-surface);
            color: var(--color-text-secondary);
            padding: var(--space-48) 0 var(--space-24);
            border-top: 1px solid var(--color-card-border);
            margin-top: var(--space-40);
        }

        .footer-content {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            gap: var(--space-32);
            margin-bottom: var(--space-32);
        }

        .footer-section {
            flex: 1 1 200px;
            min-width: 200px;
        }

        .footer-logo span {
            font-size: var(--font-size-xl);
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: var(--space-12);
            display: block;
        }

        .footer-section h4 {
            font-size: var(--font-size-lg);
            color: var(--color-text);
            margin-bottom: var(--space-16);
        }

        .footer-section ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .footer-section ul li {
            margin-bottom: var(--space-8);
        }

        .footer-section ul li a {
            color: var(--color-text-secondary);
            text-decoration: none;
            transition: color var(--duration-normal) var(--ease-standard);
        }

        .footer-section ul li a:hover {
            color: var(--color-primary);
        }

        .social-links a {
            color: var(--color-text-secondary);
            font-size: var(--font-size-xl);
            margin-right: var(--space-12);
            transition: color var(--duration-normal) var(--ease-standard);
        }

        .social-links a:hover {
            color: var(--color-primary);
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: var(--space-8);
            margin-bottom: var(--space-8);
        }

        .contact-item i {
            color: var(--color-primary);
        }

        .footer-bottom {
            text-align: center;
            padding-top: var(--space-24);
            border-top: 1px solid var(--color-card-border);
        }

        /* Responsive Adjustments */
        @media (max-width: 1024px) {
            .nav-links {
                gap: var(--space-16);
            }
            .heritage-filters {
                grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            }
            .heritage-grid {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            }
            .modal-content {
                flex-direction: column;
                max-width: 600px;
            }
            .modal-image-container {
                max-height: 300px;
            }
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
                flex-direction: column;
                position: absolute;
                top: 100%;
                left: 0;
                width: 100%;
                background-color: var(--color-surface);
                box-shadow: var(--shadow-md);
                padding: var(--space-16) 0;
                border-top: 1px solid var(--color-card-border);
            }

            .nav-links.active {
                display: flex;
            }

            .nav-link {
                padding: var(--space-8) var(--space-20);
                text-align: center;
            }

            .nav-actions {
                gap: var(--space-8);
            }

            .search-form {
                display: none; /* Hide search form on smaller screens */
            }

            .mobile-menu-toggle {
                display: flex;
            }

            main {
                padding-top: 80px; /* Adjust for smaller navbar */
            }

            .section-title {
                font-size: var(--font-size-2xl);
            }

            .section-subtitle {
                font-size: var(--font-size-base);
            }

            .hero-actions {
                flex-direction: column;
            }

            .heritage-filters {
                grid-template-columns: 1fr; /* Single column on very small screens */
            }

            .section-heading-with-sort {
                flex-direction: column;
                align-items: flex-start;
            }

            .section-heading-with-sort .sort-group {
                width: 100%;
                justify-content: space-between;
            }

            .heritage-grid {
                grid-template-columns: 1fr; /* Single column on very small screens */
            }

            .footer-content {
                flex-direction: column;
                text-align: center;
            }

            .footer-section {
                min-width: unset;
                width: 100%;
            }

            .social-links {
                margin-top: var(--space-16);
            }

            .contact-item {
                justify-content: center;
            }
        }

        @media (max-width: 480px) {
            .nav-container {
                padding: 0 var(--space-12);
            }
            .nav-logo .logo-text {
                font-size: var(--font-size-lg);
            }
            .btn--login, .btn--sos {
                padding: var(--space-4) var(--space-8);
                font-size: var(--font-size-sm);
            }
            main {
                padding-top: 70px;
            }
            .section-title {
                font-size: var(--font-size-xl);
            }
            .heritage-filters {
                padding: var(--space-16);
            }
            .form-group {
                margin-bottom: var(--space-16);
            }
            .form-control {
                padding: var(--space-8);
            }
            .modal-content {
                padding: var(--space-20);
            }
            .modal-details h2 {
                font-size: var(--font-size-2xl);
            }
            .modal-details p {
                font-size: var(--font-size-base);
            }
            .modal-details .price {
                font-size: var(--font-size-xl);
            }
            .modal-details .modal-actions {
                flex-direction: column;
            }
            .modal-details .modal-actions .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <span class="logo-text">Jharkhand Explorer </span>
            </div>

            <div class="nav-links" id="navLinks">
                <a href="/" class="nav-link">Home</a>
                <a href="heritage.html" class="nav-link active">Rich Cultural Heritage</a>
                <a href="guides.html" class="nav-link">Guides</a>
                <a href="transport.html" class="nav-link">Transportation & Guide</a>
                <a href="contact.html" class="nav-link">Contact</a>
                <a href="shop.html" class="nav-link">Shop</a>
            </div>

            <div class="nav-actions">
                <form class="search-form" id="searchForm" role="search">
                    <label for="searchInput" class="sr-only">Search</label>
                    <input type="search" placeholder="Search heritage..." class="search-input" id="searchInput" aria-label="Search heritage content">
                    <button type="submit" class="search-btn" aria-label="Submit search">
                        <i class="fas fa-search"></i>
                    </button>
                </form>

                <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
                    <i class="fas fa-moon"></i>
                </button>

                <button class="btn btn--login">Login</button>

                <button class="btn btn--sos" id="sosButton" aria-label="Emergency SOS">
                    <i class="fas fa-exclamation-triangle"></i> SOS
                </button>

                <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Toggle mobile menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </div>
    </nav>

    <main>
        <section class="heritage-section" id="cultural-heritage">
            <div class="container">
                <div class="section-header">
                    <h1 class="section-title">Rich Cultural Heritage</h1>
                    <p class="section-subtitle">Immerse yourself in the vibrant traditions, festivals, and arts of Jharkhand's tribal communities.</p>
                    <div class="hero-actions mt-8">
                        <button class="btn btn--primary btn--hero" onclick="scrollToSection('festivals-section')">
                            <i class="fas fa-calendar-alt"></i> Explore Festivals
                        </button>
                        <button class="btn btn--secondary btn--hero" onclick="scrollToSection('arts-crafts-section')">
                            <i class="fas fa-paint-brush"></i> Discover Arts & Crafts
                        </button>
                        <button class="btn btn--primary btn--hero" onclick="scrollToSection('tribal-tours-section')">
                            <i class="fas fa-users"></i> Book Tribal Tours
                        </button>
                    </div>
                </div>

                <div class="heritage-filters">
                    <div class="form-group">
                        <label for="festivalDateFilter" class="form-label">Festival Date Range</label>
                        <select class="form-control" id="festivalDateFilter" aria-label="Filter festivals by date range">
                            <option value="all">All Dates</option>
                            <option value="spring">Spring (March-April)</option>
                            <option value="summer">Summer (May-July)</option>
                            <option value="autumn">Autumn (Aug-Oct)</option>
                            <option value="winter">Winter (Nov-Feb)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="festivalLocationFilter" class="form-label">Festival Location</label>
                        <select class="form-control" id="festivalLocationFilter" aria-label="Filter festivals by location">
                            <option value="all">All Locations</option>
                            <option value="Ranchi">Ranchi</option>
                            <option value="Santhal">Santhal Region</option>
                            <option value="Oraon">Oraon Region</option>
                            <option value="Munda">Munda Region</option>
                            <option value="Hazaribagh">Hazaribagh</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="festivalTypeFilter" class="form-label">Festival Type</label>
                        <select class="form-control" id="festivalTypeFilter" aria-label="Filter festivals by type">
                            <option value="all">All Types</option>
                            <option value="harvest">Harvest</option>
                            <option value="religious">Religious</option>
                            <option value="newyear">New Year</option>
                            <option value="cultural">Cultural</option>
                        </select>
                    </div>
                    <div class="form-group checkbox-group">
                        <input type="checkbox" id="festivalFamilyFriendlyFilter" class="form-check-input" aria-label="Show family-friendly festivals">
                        <label for="festivalFamilyFriendlyFilter" class="form-check-label">Family-Friendly</label>
                    </div>

                    <div class="form-group">
                        <label for="craftRegionFilter" class="form-label">Craft Region</label>
                        <select class="form-control" id="craftRegionFilter" aria-label="Filter crafts by region">
                            <option value="all">All Regions</option>
                            <option value="Santhal">Santhal</option>
                            <option value="Oraon">Oraon</option>
                            <option value="Munda">Munda</option>
                            <option value="Palamu">Palamu</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="craftTypeFilter" class="form-label">Craft Type</label>
                        <select class="form-control" id="craftTypeFilter" aria-label="Filter crafts by type">
                            <option value="all">All Craft Types</option>
                            <option value="Jadur Painting">Jadur Painting</option>
                            <option value="Dokra Art">Dokra Art</option>
                            <option value="Bamboo Crafts">Bamboo Crafts</option>
                            <option value="Basketry">Basketry</option>
                            <option value="Wood Carving">Wood Carving</option>
                            <option value="Terracotta">Terracotta</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="tourDurationFilter" class="form-label">Tour Duration</label>
                        <select class="form-control" id="tourDurationFilter" aria-label="Filter tours by duration">
                            <option value="all">Any Duration</option>
                            <option value="Half day">Half Day</option>
                            <option value="1 day">1 Day</option>
                            <option value="2 days">2 Days</option>
                            <option value="3+ days">3+ Days</option>
                        </select>
                    </div>
                    <button class="btn btn--primary" id="applyFiltersBtn" style="grid-column: span 1 / -1; margin-top: var(--space-16);">Apply All Filters</button>
                </div>

                <section class="my-8" id="festivals-section">
                    <div class="section-heading-with-sort">
                        <h2 class="section-title">Upcoming Festivals</h2>
                        <div class="sort-group">
                            <label for="festivalSortOrder" class="form-label sr-only">Sort Festivals By:</label>
                            <select class="form-control" id="festivalSortOrder" aria-label="Sort festivals by">
                                <option value="default">Default</option>
                                <option value="date-asc">Date (Soonest)</option>
                                <option value="date-desc">Date (Latest)</option>
                                <option value="name-asc">Name (A-Z)</option>
                            </select>
                        </div>
                    </div>
                    <div class="heritage-grid" id="festivalsGrid">
                        <!-- Festivals will be loaded here by JS -->
                    </div>
                    <div class="no-items-message" id="noFestivalsMessage" aria-live="polite">
                        No festivals found matching your criteria.
                    </div>
                </section>

                <section class="my-8" id="arts-crafts-section">
                    <div class="section-heading-with-sort">
                        <h2 class="section-title">Traditional Arts & Crafts</h2>
                        <div class="sort-group">
                            <label for="craftSortOrder" class="form-label sr-only">Sort Arts & Crafts By:</label>
                            <select class="form-control" id="craftSortOrder" aria-label="Sort arts and crafts by">
                                <option value="default">Default</option>
                                <option value="name-asc">Name (A-Z)</option>
                                <option value="region-asc">Region (A-Z)</option>
                            </select>
                        </div>
                    </div>
                    <div class="heritage-grid" id="artsCraftsGrid">
                        <!-- Arts & Crafts will be loaded here by JS -->
                    </div>
                    <div class="no-items-message" id="noArtsCraftsMessage" aria-live="polite">
                        No arts & crafts found matching your criteria.
                    </div>
                </section>

                <section class="my-8" id="tribal-tours-section">
                    <div class="section-heading-with-sort">
                        <h2 class="section-title">Experience Tribal Culture</h2>
                        <div class="sort-group">
                            <label for="tourSortOrder" class="form-label sr-only">Sort Tribal Tours By:</label>
                            <select class="form-control" id="tourSortOrder" aria-label="Sort tribal tours by">
                                <option value="default">Default</option>
                                <option value="duration-asc">Duration (Shortest)</option>
                                <option value="duration-desc">Duration (Longest)</option>
                                <option value="price-asc">Price (Low to High)</option>
                            </select>
                        </div>
                    </div>
                    <p class="section-subtitle">Book immersive tours and workshops directly with local communities.</p>
                    <div class="heritage-grid" id="tribalToursGrid">
                        <!-- Tribal Tours will be loaded here by JS -->
                    </div>
                    <div class="no-items-message" id="noTribalToursMessage" aria-live="polite">
                        No tribal tours found matching your criteria.
                    </div>
                </section>
            </div>
        </section>
    </main>

    <!-- Detail Modal -->
    <div id="heritageDetailModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modalHeritageTitle">
        <div class="modal-content">
            <span class="modal-close-btn" id="modalCloseBtn" aria-label="Close details">&times;</span>
            <div class="modal-image-container">
                <img src="" alt="Heritage Item Image" id="modalHeritageImage">
            </div>
            <div class="modal-details">
                <h2 id="modalHeritageTitle"></h2>
                <p><strong>Type:</strong> <span id="modalHeritageType"></span></p>
                <p id="modalHeritageMeta1"></p>
                <p id="modalHeritageMeta2"></p>
                <p id="modalHeritageDescription"></p>
                <div class="price" id="modalHeritagePrice"></div>
                <div class="modal-actions">
                    <button class="btn btn--primary" id="modalHeritageActionBtn">Explore / Book Now</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-logo">
                        <span>Jharkhand Explorer</span>
                    </div>
                    <p>Discover the incredible beauty of Jharkhand with our AI-powered travel platform.</p>
                    <div class="social-links">
                        <a href="#" target="_blank" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
                        <a href="#" target="_blank" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" target="_blank" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" target="_blank" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>

                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="/">Home</a></li>
                        <li><a href="/heritage/">Rich Cultural Heritage</a></li>
                        <li><a href="/guides/">Guides</a></li>
                        <li><a href="/transport/">Transportation & Guide</a></li>
                        <li><a href="/contact/">Contact</a></li>
                        <li><a href="/shop.html">Shop</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h4>Services</h4>
                    <ul>
                        <li><a href="/#ai-planner">AI Trip Planner</a></li>
                        <li><a href="/#accommodation">Accommodation</a></li>
                        <li><a href="/guides/">Local Guides</a></li>
                        <li><a href="/transport/">Transportation</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h4>Contact Info</h4>
                    <div class="contact-info">
                        <div class="contact-item">
                            <i class="fas fa-phone"></i>
                            <span>+91 12345 67890</span>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-envelope"></i>
                            <span>info@jharkhandexplorer.com</span>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>Ranchi, Jharkhand, India</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="footer-bottom">
                <div class="footer-text">
                    <p>&copy; 2025 Jharkhand Explorer. All rights reserved.</p>
                </div>
            </div>
        </div>
    </footer>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vanilla-tilt@1.7.2/dist/vanilla-tilt.min.js"></script>
    <script src="/app.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Sample Data ---
            const allFestivals = [
                {
                    id: 1,
                    name: "Sarhul Festival",
                    dateRange: "Spring (March-April)",
                    location: "Ranchi",
                    type: "harvest",
                    familyFriendly: true,
                    image: "https://images.unsplash.com/photo-1587049352851-8d4e891d7744?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                    description: "Sarhul is the most popular tribal festival of Jharkhand, celebrated by the Oraon, Munda, and Ho tribes. It marks the beginning of the new year and the worship of the village deity. Celebrations include traditional dances, songs, and offerings to nature.",
                    fullDate: "March 20 - April 15"
                },
                {
                    id: 2,
                    name: "Karma Festival",
                    dateRange: "Autumn (Aug-Oct)",
                    location: "Santhal Region",
                    type: "harvest",
                    familyFriendly: true,
                    image: "https://images.unsplash.com/photo-1587049352851-8d4e891d7744?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                    description: "Karma is a harvest festival dedicated to the Karma tree, symbolizing prosperity and good fortune. Young girls observe a fast and perform traditional dances around the Karma tree. It's a vibrant celebration of nature and fertility.",
                    fullDate: "August 25 - September 10"
                },
                {
                    id: 3,
                    name: "Sohrai Festival",
                    dateRange: "Winter (Nov-Feb)",
                    location: "Munda Region",
                    type: "religious",
                    familyFriendly: true,
                    image: "https://images.unsplash.com/photo-1587049352851-8d4e891d7744?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                    description: "Sohrai is a cattle festival celebrated after the harvest, honoring livestock for their contribution to agriculture. Houses are decorated with beautiful Sohrai paintings, and animals are adorned and worshipped. It's a colorful display of tribal art and devotion.",
                    fullDate: "November 10 - November 20"
                },
                {
                    id: 4,
                    name: "Tusu Festival",
                    dateRange: "Winter (Nov-Feb)",
                    location: "Hazaribagh",
                    type: "newyear",
                    familyFriendly: true,
                    image: "https://images.unsplash.com/photo-1587049352851-8d4e891d7744?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                    description: "Tusu is a folk festival celebrated during the winter harvest, particularly by unmarried girls. They prepare a small idol of Tusu Devi and immerse it in a river, accompanied by songs and dances. It marks the end of the harvesting season and the arrival of new crops.",
                    fullDate: "January 14 - January 16"
                }
            ];

            const allArtsCrafts = [
                {
                    id: 101,
                    name: "Jadur Painting Workshop",
                    region: "Santhal",
                    type: "Jadur Painting",
                    image: "https://images.unsplash.com/photo-1587049352851-8d4e891d7744?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                    description: "Learn the intricate art of Jadur painting, a traditional Santhal scroll painting depicting myths and social messages. Participate in a hands-on workshop with local artists.",
                    price: 1200,
                    duration: "Half Day"
                },
                {
                    id: 102,
                    name: "Dokra Art Creation",
                    region: "Oraon",
                    type: "Dokra Art",
                    image: "https://images.unsplash.com/photo-1587049352851-8d4e891d7744?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                    description: "Discover the ancient lost-wax casting technique of Dokra art. Observe artisans at work and try your hand at creating small metal figurines. A unique cultural experience.",
                    price: 1800,
                    duration: "1 Day"
                },
                {
                    id: 103,
                    name: "Bamboo Crafting Session",
                    region: "Munda",
                    type: "Bamboo Crafts",
                    image: "https://images.unsplash.com/photo-1587049352851-8d4e891d7744?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                    description: "Engage in a practical session of bamboo crafting, learning to make baskets, decorative items, or utility products from skilled tribal artisans. Take home your creation!",
                    price: 900,
                    duration: "Half Day"
                },
                {
                    id: 104,
                    name: "Terracotta Pottery Workshop",
                    region: "Palamu",
                    type: "Terracotta",
                    image: "https://images.unsplash.com/photo-1587049352851-8d4e891d7744?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                    description: "Explore the traditional terracotta pottery of Palamu. Learn about the clay preparation, shaping techniques, and firing process. Create your own earthen pot or figurine.",
                    price: 1500,
                    duration: "1 Day"
                }
            ];

            const allTribalTours = [
                {
                    id: 201,
                    name: "Santhal Village Immersion",
                    duration: "2 days",
                    location: "Santhal Region",
                    price: 4500,
                    image: "https://images.unsplash.com/photo-1587049352851-8d4e891d7744?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                    description: "Spend two days living with a Santhal family, experiencing their daily life, cuisine, and cultural practices. Participate in village activities and learn about their traditions firsthand. Includes accommodation and meals."
                },
                {
                    id: 202,
                    name: "Oraon Cultural Trail",
                    duration: "1 day",
                    location: "Oraon Region",
                    price: 2500,
                    image: "https://images.unsplash.com/photo-1587049352851-8d4e891d7744?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                    description: "A day-long tour exploring Oraon villages, their unique dance forms, music, and traditional houses. Interact with community elders and learn about their social structure and beliefs. Includes lunch with a local family."
                },
                {
                    id: 203,
                    name: "Munda Heritage Walk",
                    duration: "Half day",
                    location: "Munda Region",
                    price: 1500,
                    image: "https://images.unsplash.com/photo-1587049352851-8d4e891d7744?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                    description: "A guided half-day walk through a Munda village, focusing on their historical significance, agricultural practices, and traditional governance system. Visit local markets and craft centers. Perfect for a quick cultural insight."
                },
                {
                    id: 204,
                    name: "Jharkhand Tribal Circuit",
                    duration: "3+ days",
                    location: "Multiple Regions",
                    price: 8000,
                    image: "https://images.unsplash.com/photo-1587049352851-8d4e891d7744?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                    description: "An extended tour covering multiple tribal regions of Jharkhand, offering a comprehensive experience of diverse cultures, festivals, and landscapes. Customizable itinerary. Includes transport, accommodation, and local guides."
                }
            ];

            let displayedFestivals = [...allFestivals];
            let displayedArtsCrafts = [...allArtsCrafts];
            let displayedTribalTours = [...allTribalTours];

            // --- DOM Elements ---
            const festivalsGrid = document.getElementById('festivalsGrid');
            const artsCraftsGrid = document.getElementById('artsCraftsGrid');
            const tribalToursGrid = document.getElementById('tribalToursGrid');

            const noFestivalsMessage = document.getElementById('noFestivalsMessage');
            const noArtsCraftsMessage = document.getElementById('noArtsCraftsMessage');
            const noTribalToursMessage = document.getElementById('noTribalToursMessage');

            // Filter Elements
            const festivalDateFilter = document.getElementById('festivalDateFilter');
            const festivalLocationFilter = document.getElementById('festivalLocationFilter');
            const festivalTypeFilter = document.getElementById('festivalTypeFilter');
            const festivalFamilyFriendlyFilter = document.getElementById('festivalFamilyFriendlyFilter');

            const craftRegionFilter = document.getElementById('craftRegionFilter');
            const craftTypeFilter = document.getElementById('craftTypeFilter');

            const tourDurationFilter = document.getElementById('tourDurationFilter');
            const applyFiltersBtn = document.getElementById('applyFiltersBtn');

            // Sort Elements
            const festivalSortOrder = document.getElementById('festivalSortOrder');
            const craftSortOrder = document.getElementById('craftSortOrder');
            const tourSortOrder = document.getElementById('tourSortOrder');

            // Search Element
            const searchInput = document.getElementById('searchInput');
            const searchForm = document.getElementById('searchForm');

            // Modal Elements
            const heritageDetailModal = document.getElementById('heritageDetailModal');
            const modalCloseBtn = document.getElementById('modalCloseBtn');
            const modalHeritageImage = document.getElementById('modalHeritageImage');
            const modalHeritageTitle = document.getElementById('modalHeritageTitle');
            const modalHeritageType = document.getElementById('modalHeritageType');
            const modalHeritageMeta1 = document.getElementById('modalHeritageMeta1');
            const modalHeritageMeta2 = document.getElementById('modalHeritageMeta2');
            const modalHeritageDescription = document.getElementById('modalHeritageDescription');
            const modalHeritagePrice = document.getElementById('modalHeritagePrice');
            const modalHeritageActionBtn = document.getElementById('modalHeritageActionBtn');


            // --- Functions ---

            /**
             * Creates an HTML card for a heritage item (festival, art, tour).
             * @param {object} item - The heritage item data.
             * @param {string} type - The type of item ('festival', 'art', 'tour').
             * @returns {HTMLElement} The heritage card div.
             */
            function createHeritageCard(item, type) {
                const card = document.createElement('div');
                card.className = 'heritage-card';
                card.setAttribute('data-id', item.id);
                card.setAttribute('data-type', type);

                let meta1 = '';
                let meta2 = '';
                let badge = '';
                let actionText = 'View Details';
                let priceDisplay = '';

                if (type === 'festival') {
                    meta1 = `<i class="fas fa-calendar-alt"></i> ${item.fullDate || item.dateRange}`;
                    meta2 = `<i class="fas fa-map-marker-alt"></i> ${item.location}`;
                    badge = item.type;
                    actionText = 'Explore Festival';
                } else if (type === 'art') {
                    meta1 = `<i class="fas fa-palette"></i> ${item.type}`;
                    meta2 = `<i class="fas fa-map-marker-alt"></i> ${item.region}`;
                    badge = item.duration;
                    actionText = 'Discover Workshop';
                    priceDisplay = `${item.price.toLocaleString()}`;
                } else if (type === 'tour') {
                    meta1 = `<i class="fas fa-clock"></i> ${item.duration}`;
                    meta2 = `<i class="fas fa-map-marker-alt"></i> ${item.location}`;
                    badge = 'Tour';
                    actionText = 'Book Tour';
                    priceDisplay = `${item.price.toLocaleString()}`;
                }

                card.innerHTML = `
                    <div class="card-image">
                        <img src="${item.image}" alt="${item.name}" loading="lazy">
                        ${badge ? `<div class="card-badge">${badge}</div>` : ''}
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">${item.name}</h3>
                        <p class="card-meta">${meta1}</p>
                        <p class="card-meta">${meta2}</p>
                        <p class="card-description">${item.description.substring(0, 100)}...</p>
                        ${priceDisplay ? `<div class="card-price">${priceDisplay}</div>` : ''}
                        <div class="card-actions">
                            <button class="btn btn--primary btn--sm view-details-btn" data-id="${item.id}" data-type="${type}">${actionText}</button>
                        </div>
                    </div>
                `;
                return card;
            }

            /**
             * Renders items to a specific grid.
             * @param {Array} itemsToRender - The array of items to display.
             * @param {HTMLElement} gridElement - The DOM element for the grid.
             * @param {HTMLElement} messageElement - The DOM element for the 'no items' message.
             * @param {string} type - The type of item ('festival', 'art', 'tour').
             */
            function renderItems(itemsToRender, gridElement, messageElement, type) {
                gridElement.innerHTML = '';
                if (itemsToRender.length === 0) {
                    messageElement.style.display = 'block';
                } else {
                    messageElement.style.display = 'none';
                    itemsToRender.forEach(item => {
                        gridElement.appendChild(createHeritageCard(item, type));
                    });
                    VanillaTilt.init(gridElement.querySelectorAll(".heritage-card"), {
                        max: 5, speed: 400, glare: true, "max-glare": 0.2
                    });
                }
            }

            /**
             * Applies filters and sorting to all heritage sections.
             */
            function applyFiltersAndSort() {
                // --- Filter Festivals ---
                let filteredFestivals = [...allFestivals];
                const fDateRange = festivalDateFilter.value;
                if (fDateRange !== 'all') {
                    filteredFestivals = filteredFestivals.filter(f => f.dateRange === fDateRange);
                }
                const fLocation = festivalLocationFilter.value;
                if (fLocation !== 'all') {
                    filteredFestivals = filteredFestivals.filter(f => f.location === fLocation);
                }
                const fType = festivalTypeFilter.value;
                if (fType !== 'all') {
                    filteredFestivals = filteredFestivals.filter(f => f.type === fType);
                }
                if (festivalFamilyFriendlyFilter.checked) {
                    filteredFestivals = filteredFestivals.filter(f => f.familyFriendly === true);
                }

                // --- Filter Arts & Crafts ---
                let filteredArtsCrafts = [...allArtsCrafts];
                const cRegion = craftRegionFilter.value;
                if (cRegion !== 'all') {
                    filteredArtsCrafts = filteredArtsCrafts.filter(c => c.region === cRegion);
                }
                const cType = craftTypeFilter.value;
                if (cType !== 'all') {
                    filteredArtsCrafts = filteredArtsCrafts.filter(c => c.type === cType);
                }

                // --- Filter Tribal Tours ---
                let filteredTribalTours = [...allTribalTours];
                const tDuration = tourDurationFilter.value;
                if (tDuration !== 'all') {
                    filteredTribalTours = filteredTribalTours.filter(t => t.duration === tDuration);
                }

                // --- Apply Search Query to all ---
                const searchQuery = searchInput.value.toLowerCase().trim();
                if (searchQuery) {
                    filteredFestivals = filteredFestivals.filter(item =>
                        item.name.toLowerCase().includes(searchQuery) ||
                        item.description.toLowerCase().includes(searchQuery) ||
                        item.location.toLowerCase().includes(searchQuery) ||
                        item.type.toLowerCase().includes(searchQuery)
                    );
                    filteredArtsCrafts = filteredArtsCrafts.filter(item =>
                        item.name.toLowerCase().includes(searchQuery) ||
                        item.description.toLowerCase().includes(searchQuery) ||
                        item.region.toLowerCase().includes(searchQuery) ||
                        item.type.toLowerCase().includes(searchQuery)
                    );
                    filteredTribalTours = filteredTribalTours.filter(item =>
                        item.name.toLowerCase().includes(searchQuery) ||
                        item.description.toLowerCase().includes(searchQuery) ||
                        item.location.toLowerCase().includes(searchQuery) ||
                        item.duration.toLowerCase().includes(searchQuery)
                    );
                }

                // --- Sort Festivals ---
                const fSortOption = festivalSortOrder.value;
                if (fSortOption === 'date-asc') {
                    filteredFestivals.sort((a, b) => new Date(a.fullDate.split(' - ')[0]) - new Date(b.fullDate.split(' - ')[0]));
                } else if (fSortOption === 'date-desc') {
                    filteredFestivals.sort((a, b) => new Date(b.fullDate.split(' - ')[0]) - new Date(a.fullDate.split(' - ')[0]));
                } else if (fSortOption === 'name-asc') {
                    filteredFestivals.sort((a, b) => a.name.localeCompare(b.name));
                }

                // --- Sort Arts & Crafts ---
                const cSortOption = craftSortOrder.value;
                if (cSortOption === 'name-asc') {
                    filteredArtsCrafts.sort((a, b) => a.name.localeCompare(b.name));
                } else if (cSortOption === 'region-asc') {
                    filteredArtsCrafts.sort((a, b) => a.region.localeCompare(b.region));
                }

                // --- Sort Tribal Tours ---
                const tSortOption = tourSortOrder.value;
                if (tSortOption === 'duration-asc') {
                    filteredTribalTours.sort((a, b) => {
                        const getDurationValue = (d) => {
                            if (d.includes('Half day')) return 0.5;
                            if (d.includes('1 day')) return 1;
                            if (d.includes('2 days')) return 2;
                            if (d.includes('3+ days')) return 3;
                            return 999; // For 'all' or unknown
                        };
                        return getDurationValue(a.duration) - getDurationValue(b.duration);
                    });
                } else if (tSortOption === 'duration-desc') {
                    filteredTribalTours.sort((a, b) => {
                        const getDurationValue = (d) => {
                            if (d.includes('Half day')) return 0.5;
                            if (d.includes('1 day')) return 1;
                            if (d.includes('2 days')) return 2;
                            if (d.includes('3+ days')) return 3;
                            return 999;
                        };
                        return getDurationValue(b.duration) - getDurationValue(a.duration);
                    });
                } else if (tSortOption === 'price-asc') {
                    filteredTribalTours.sort((a, b) => a.price - b.price);
                }


                displayedFestivals = filteredFestivals;
                displayedArtsCrafts = filteredArtsCrafts;
                displayedTribalTours = filteredTribalTours;

                renderItems(displayedFestivals, festivalsGrid, noFestivalsMessage, 'festival');
                renderItems(displayedArtsCrafts, artsCraftsGrid, noArtsCraftsMessage, 'art');
                renderItems(displayedTribalTours, tribalToursGrid, noTribalToursMessage, 'tour');
            }

            /**
             * Opens the detail modal for any heritage item.
             * @param {object} item - The heritage item data.
             * @param {string} type - The type of item ('festival', 'art', 'tour').
             */
            function openHeritageDetailModal(item, type) {
                modalHeritageImage.src = item.image;
                modalHeritageImage.alt = item.name;
                modalHeritageTitle.textContent = item.name;
                modalHeritageType.textContent = type.charAt(0).toUpperCase() + type.slice(1); // Capitalize first letter
                modalHeritageDescription.textContent = item.description;

                let meta1Text = '';
                let meta2Text = '';
                let priceText = '';
                let actionBtnText = 'View Details';

                if (type === 'festival') {
                    meta1Text = `<strong>Date:</strong> ${item.fullDate || item.dateRange}`;
                    meta2Text = `<strong>Location:</strong> ${item.location} | <strong>Type:</strong> ${item.type}`;
                    actionBtnText = 'Explore More';
                } else if (type === 'art') {
                    meta1Text = `<strong>Type:</strong> ${item.type} | <strong>Region:</strong> ${item.region}`;
                    meta2Text = `<strong>Duration:</strong> ${item.duration}`;
                    priceText = `<strong>Price:</strong> ${item.price.toLocaleString()}`;
                    actionBtnText = 'Join Workshop';
                } else if (type === 'tour') {
                    meta1Text = `<strong>Duration:</strong> ${item.duration} | <strong>Location:</strong> ${item.location}`;
                    meta2Text = ''; // Can add more tour-specific meta if needed
                    priceText = `<strong>Price:</strong> ${item.price.toLocaleString()}`;
                    actionBtnText = 'Book Tour';
                }

                modalHeritageMeta1.innerHTML = meta1Text;
                modalHeritageMeta2.innerHTML = meta2Text;
                modalHeritagePrice.innerHTML = priceText;
                modalHeritageActionBtn.textContent = actionBtnText;

                // Set data attributes for the action button
                modalHeritageActionBtn.setAttribute('data-id', item.id);
                modalHeritageActionBtn.setAttribute('data-type', type);
                modalHeritageActionBtn.setAttribute('data-name', item.name);

                heritageDetailModal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            }

            /**
             * Closes the detail modal.
             */
            function closeHeritageDetailModal() {
                heritageDetailModal.style.display = 'none';
                document.body.style.overflow = '';
            }

            // --- Event Listeners ---

            // Initial render of all items
            applyFiltersAndSort(); // This will render all initially

            // Filter Event Listeners
            applyFiltersBtn.addEventListener('click', applyFiltersAndSort);
            festivalDateFilter.addEventListener('change', applyFiltersAndSort);
            festivalLocationFilter.addEventListener('change', applyFiltersAndSort);
            festivalTypeFilter.addEventListener('change', applyFiltersAndSort);
            festivalFamilyFriendlyFilter.addEventListener('change', applyFiltersAndSort);
            craftRegionFilter.addEventListener('change', applyFiltersAndSort);
            craftTypeFilter.addEventListener('change', applyFiltersAndSort);
            tourDurationFilter.addEventListener('change', applyFiltersAndSort);

            // Sort Event Listeners
            festivalSortOrder.addEventListener('change', applyFiltersAndSort);
            craftSortOrder.addEventListener('change', applyFiltersAndSort);
            tourSortOrder.addEventListener('change', applyFiltersAndSort);

            // Search functionality
            searchForm.addEventListener('submit', (e) => {
                e.preventDefault();
                applyFiltersAndSort();
            });
            // Optional: Live search as user types (can be performance intensive for large datasets)
            // searchInput.addEventListener('input', applyFiltersAndSort);


            // Event Delegation for View Details buttons on all grids
            document.querySelectorAll('.heritage-grid').forEach(grid => {
                grid.addEventListener('click', (e) => {
                    const target = e.target;
                    if (target.classList.contains('view-details-btn')) {
                        const id = parseInt(target.dataset.id);
                        const type = target.dataset.type;
                        let item;
                        if (type === 'festival') item = allFestivals.find(f => f.id === id);
                        else if (type === 'art') item = allArtsCrafts.find(a => a.id === id);
                        else if (type === 'tour') item = allTribalTours.find(t => t.id === id);

                        if (item) openHeritageDetailModal(item, type);
                    }
                });
            });

            // Modal Event Listeners
            modalCloseBtn.addEventListener('click', closeHeritageDetailModal);
            heritageDetailModal.addEventListener('click', (e) => {
                if (e.target === heritageDetailModal) closeHeritageDetailModal();
            });
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && heritageDetailModal.style.display === 'flex') closeHeritageDetailModal();
            });

            modalHeritageActionBtn.addEventListener('click', (e) => {
                const type = e.target.dataset.type;
                const name = e.target.dataset.name;
                if (type === 'festival') {
                    alert(`Exploring more about ${name}! (Demo: Imagine redirecting to a festival detail page)`);
                } else if (type === 'art') {
                    alert(`Joining workshop for ${name}! (Demo: Imagine redirecting to a booking form for the workshop)`);
                } else if (type === 'tour') {
                    alert(`Booking tour: ${name}! (Demo: Imagine redirecting to a tour booking page)`);
                }
                closeHeritageDetailModal();
            });

            // Scroll to section function for hero buttons
            window.scrollToSection = function(sectionId) {
                const section = document.getElementById(sectionId);
                if (section) {
                    const navbarHeight = document.getElementById('navbar').offsetHeight;
                    window.scrollTo({
                        top: section.offsetTop - navbarHeight - 20, // Adjust for navbar and some padding
                        behavior: 'smooth'
                    });
                }
            };


            // --- General Site Functionality (from original app.js/inline script) ---

            // Theme Toggle
            const themeToggle = document.getElementById('themeToggle');
            if (themeToggle) {
                themeToggle.addEventListener('click', (e) => {
                    e.preventDefault();
                    const currentTheme = document.documentElement.getAttribute('data-theme');
                    const newTheme = currentTheme === 'light' ? 'dark' : 'light';
                    document.documentElement.setAttribute('data-theme', newTheme);
                    localStorage.setItem('theme', newTheme);
                    const icon = themeToggle.querySelector('i');
                    if (icon) {
                        icon.className = newTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
                    }
                });
                // Set initial icon based on current theme
                const currentTheme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
                document.documentElement.setAttribute('data-theme', currentTheme); // Ensure theme is set on load
                const icon = themeToggle.querySelector('i');
                if (icon) {
                    icon.className = currentTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
                }
            }

            // Mobile Menu Toggle
            const mobileMenuToggle = document.getElementById('mobileMenuToggle');
            const navLinks = document.getElementById('navLinks');
            if (mobileMenuToggle && navLinks) {
                mobileMenuToggle.addEventListener('click', (e) => {
                    e.preventDefault();
                    navLinks.classList.toggle('active');
                    mobileMenuToggle.classList.toggle('active');
                });
                // Close mobile menu when a link is clicked
                navLinks.querySelectorAll('.nav-link').forEach(link => {
                    link.addEventListener('click', () => {
                        navLinks.classList.remove('active');
                        mobileMenuToggle.classList.remove('active');
                    });
                });
            }

            // SOS Button functionality
            const sosButton = document.getElementById('sosButton');
            if (sosButton) {
                sosButton.addEventListener('click', () => {
                    alert('Emergency! Please contact local authorities or your travel guide. Emergency contact: +91 98765 43210');
                });
            }
        });
    </script>
</body>
</html>